{"version":3,"sources":["api/route/index.js"],"names":["express","require","router","Router","controller","get","index","req","res","next","json","sender_id","routes","id","name","balance","delete","status","text","post","end","SOURCES","WEB","MOBILE","API","message","download","count","request_id","scheduled_on","Date","campaign","route_id","percentage_done","credits","deducted","put","module","exports"],"mappings":"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","file":"index.js","sourcesContent":["const express = require('express');\n\nconst router = express.Router();\nconst controller = require('./routes.controller');\nimport oauth from '../../components/oauth/auth';\n\nrouter.get('/', oauth(), controller.index);\n\n// senderid 6/6 message\n\n// text box 160/ messages\n// add group on enter create group\n/**\n * POST groups name\n * GET groups id, name, count\n * PUT Groups/:id name (rename)\n */\n// convert to csv link https://www.ablebits.com/office-addins-blog/2014/04/24/convert-excel-csv/\n// upload csv button\n// on csv file show 'File is selected'\n//Blacklist number\n/***\n * post blacklist number\n * get blacklists\n * delete blacklists/:id\n * download blacklists\n */\nrouter.get('/routes', (req, res, next) => {\n\n  // req.user.id\n  return res.json({\n    sender_id: 'MANJSE',\n    routes: [\n    {id: 1, name: 'Transactional Route', balance: 50},\n    {id: 2, name: 'Promotional Route', balance: 50},\n    {id: 3, name: 'Sender ID Route', balance: 50},\n    {id: 4, name: 'OTP', balance: 50},\n    ]\n  })\n});\n\nrouter.get('/routes/:routeId/senderIds', (req, res, next) => {\n  // req.params.route_id\n  return res.json([{ name: 'HIDIGE' }])\n});\n\nrouter.delete('/routes/:routeId/senderIds', (req, res, next) => {\n  // req.params.route_id\n  return res.json({})\n});\n\n\nrouter.get('/users/sign', (req, res, next) => {\n  // req.user.id\n  return res.json({status: 0, text: '@Digender'})\n});\n\nrouter.post('/users/sign', (req, res, next) => {\n  // req.body.status | Boolean\n  // req.body.text | String\n  // req.user.id\n  return res.status(200).end()\n});\n\nrouter.post('/users/signStatus', (req, res, next) => {\n  // req.body.signStatus\n  // req.user.id\n  return res.status(200).end()\n});\n\n/***\n * Signature will affect your message credits by adding extra characters and space between SMS and signature.\n */\n\nrouter.post('/sms1', (req, res, next) => {\n  const SOURCES = {\n    WEB: 1,\n    MOBILE: 2,\n    API: 3,\n  }\n  /**\n   * req.body.route\n   * sender_id_\n   * mobile numbers(including csv file, group_id, mobilenumbers) (placeholder: Enter mobile numbers here\n   1234567890, 0123456789, 9012345678\n   8901234567\n   7890123456)\n   * unicode: false\n   * flash: false\n   * text: (placeholder: You are delivering crucial information. Keep it to-the-point.)\n   * campaingn_id || campaign_name\n   * sign: true\n   * duplicate:true if lastmessage == current message\n   * scheduled_on:  if route === promotional and 9 < currenttime > 9 throw error\n   *\n   */\n  // industry dnd check\n  // if user active continue\n  // if route === promotional and 9 < currenttime > 9 return Promotional route works on on day time\n  // packagemanager.check()\n  // lastmessage == current message retur err 400 message: last==current\n  // You messages exhaused. buy credits using http://parken.com/buy\n  // template.get().then\n  // messages.queue({ src: SOURCES.WEB })\n  // cutting.manipulate()\n\n  res.status(400).json({message: 'Your Sender Id blacklisted. Please use a different sender id'})\n  return res.json({})\n});\n\nrouter.get('/groups/exportall', (req, res, next) => {\n  return res.download('groups')\n});\n\n// get templates\nrouter.get('/templates', (req, res, next) => {\n  return res.json([{ id: 1, name: 'My First message' },\n    { id: 2, name: 'My Second message' },])\n});\n\n//save draft\nrouter.post('/drafts', (req, res, next) => {\n  return res.status(201).json({ message: 'Message Save to drafts successfully'});\n});\n\nrouter.get('/groups/:id', (req, res, next) => {\n  return res.json({ id: 1, name: 'tech team', count: 12 })\n});\n\n// get templates\nrouter.get('/campaigns', (req, res, next) => {\n  return res.json([{ id: 1, name: 'last campaign' },\n    { id: 2, name: 'new campaing team' },])\n});\n\n// hide send sms button if route === promotional and 9 < currenttime > 9\n// left bar scroll on overflow\n// load previous and load current message\n// on load previous help box turns 3rd state, with save draft button\n\n\n// get templates\nrouter.delete('/schedules', (req, res, next) => {\n  return res.json({\n    request_id: 44,\n    scheduled_on: new Date(),\n    campaign: 'one',\n    route_id: 1,\n    sender_id: 'digne',\n    text: 'hello',\n    percentage_done: 100,\n    credits: 2,\n    deducted: 2, // 0 if dnd\n    // send now buttong\n    // cancel button\n  })\n});\n\nrouter.put('/schedules/:id/cancel', (req, res, next) => {\n  return res.json()\n});\n\nmodule.exports = router;\n"]}