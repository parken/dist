{"version":3,"sources":["api/route/routes.controller.js"],"names":["index","handleError","res","argStatusCode","err","error","statusCode","status","send","req","Route","findAll","then","json","routes","filter","user","roleId","x","id","catch"],"mappings":";;;;;QAUgBA,K,GAAAA,K;;AAVhB;;;;AACA;;AACA;;;;;;AAEA,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,aAA1B,EAAyCC,GAAzC,EAA8C;AAC5C,kBAAOC,KAAP,CAAa,iBAAb,EAAgCD,GAAhC;AACA,MAAME,aAAaH,iBAAiB,GAApC;AACAD,MAAIK,MAAJ,CAAWD,UAAX,EAAuBE,IAAvB,CAA4BJ,GAA5B;AACD;;AAEM,SAASJ,KAAT,CAAeS,GAAf,EAAoBP,GAApB,EAAyB;AAC9B,SAAO,gBAAGQ,KAAH,CAASC,OAAT,GACJC,IADI,CACC;AAAA,WAAUV,IAAIW,IAAJ,CAASC,OAAOC,MAAP,CAAc;AAAA,aACrCN,IAAIO,IAAJ,EAAYP,IAAIO,IAAJ,CAASC,MAAT,KAAoB,CAApB,GAAwB,SAAxB,GAAoC,SAAhD,gBAAmE,0BAAaC,EAAEC,EAAf,CAAnE,CADqC;AAAA,KAAd,CAAT,CAAV;AAAA,GADD,EAGJC,KAHI,CAGE;AAAA,WAAOnB,YAAYC,GAAZ,EAAiB,GAAjB,EAAsBE,GAAtB,CAAP;AAAA,GAHF,CAAP;AAID","file":"routes.controller.js","sourcesContent":["import logger from '../../components/logger/index';\nimport { getRouteType } from '../../conn/sqldb/helper';\nimport db from '../../conn/sqldb/index';\n\nfunction handleError(res, argStatusCode, err) {\n  logger.error('user.controller', err);\n  const statusCode = argStatusCode || 500;\n  res.status(statusCode).send(err);\n}\n\nexport function index(req, res) {\n  return db.Route.findAll()\n    .then(routes => res.json(routes.filter(x =>\n      req.user[`${req.user.roleId === 4 ? 'selling' : 'sending'}Balance${getRouteType(x.id)}`])))\n    .catch(err => handleError(res, 500, err));\n}\n"]}