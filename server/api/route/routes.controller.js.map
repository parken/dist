{"version":3,"sources":["api/route/routes.controller.js"],"names":["index","handleError","res","argStatusCode","err","console","log","error","statusCode","status","send","req","Route","findAll","then","json","routes","filter","user","roleId","x","id","catch"],"mappings":";;;;;QAWgBA,K,GAAAA,K;;AAXhB;;;;AACA;;AACA;;;;;;AAEA,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,aAA1B,EAAyCC,GAAzC,EAA8C;AAC5CC,UAAQC,GAAR,CAAYF,GAAZ;AACA,kBAAOG,KAAP,CAAa,iBAAb,EAAgCH,GAAhC;AACA,MAAMI,aAAaL,iBAAiB,GAApC;AACAD,MAAIO,MAAJ,CAAWD,UAAX,EAAuBE,IAAvB,CAA4BN,GAA5B;AACD;;AAEM,SAASJ,KAAT,CAAeW,GAAf,EAAoBT,GAApB,EAAyB;AAC9B,SAAO,gBAAGU,KAAH,CAASC,OAAT,GACJC,IADI,CACC;AAAA,WAAUZ,IAAIa,IAAJ,CAASC,OAAOC,MAAP,CAAc;AAAA,aACrCN,IAAIO,IAAJ,EAAYP,IAAIO,IAAJ,CAASC,MAAT,KAAoB,CAApB,GAAwB,SAAxB,GAAoC,SAAhD,gBAAmE,0BAAaC,EAAEC,EAAf,CAAnE,CADqC;AAAA,KAAd,CAAT,CAAV;AAAA,GADD,EAGJC,KAHI,CAGE;AAAA,WAAOrB,YAAYC,GAAZ,EAAiB,GAAjB,EAAsBE,GAAtB,CAAP;AAAA,GAHF,CAAP;AAID","file":"routes.controller.js","sourcesContent":["import logger from '../../components/logger/index';\nimport { getRouteType } from '../../conn/sqldb/helper';\nimport db from '../../conn/sqldb/index';\n\nfunction handleError(res, argStatusCode, err) {\n  console.log(err)\n  logger.error('user.controller', err);\n  const statusCode = argStatusCode || 500;\n  res.status(statusCode).send(err);\n}\n\nexport function index(req, res) {\n  return db.Route.findAll()\n    .then(routes => res.json(routes.filter(x =>\n      req.user[`${req.user.roleId === 4 ? 'selling' : 'sending'}Balance${getRouteType(x.id)}`])))\n    .catch(err => handleError(res, 500, err));\n}\n"]}