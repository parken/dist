{"version":3,"sources":["components/logger/index.js"],"names":["dir","join","root","existsSync","mkdirSync","logger","Logger","transports","name","datePattern","filename","includes","add","Console"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,eAAKC,IAAL,CAAU,sBAAOC,IAAjB,EAAsB,MAAtB,CAAZ;AACA,IAAI,CAAC,oBAAGC,UAAH,CAAcH,GAAd,CAAL,EAAyB,oBAAGI,SAAH,CAAaJ,GAAb;;AAEzB,IAAMK,SAAS,IAAI,kBAAQC,MAAZ,CAAmB;AAChCC,cAAY,CACV,qCAAoB;AAClBC,UAAM,YADY;AAElBC,iBAAa,iBAFK;AAGlBC,cAAa,sBAAOR,IAApB;AAHkB,GAApB,CADU;AADoB,CAAnB,CAAf;;AAUA,IAAI,CAAC,aAAD,EAAgB,MAAhB,EAAwBS,QAAxB,uBAAJ,EAAgDN,OAAOO,GAAP,CAAW,kBAAQL,UAAR,CAAmBM,OAA9B;;kBAEjCR,M","file":"index.js","sourcesContent":["import fs from 'fs-promise';\nimport path from 'path';\nimport winston from 'winston';\nimport config, { NODE_ENV } from '../../config/environment';\nimport DailyRotateFile from 'winston-daily-rotate-file';\n\nconst dir = path.join(config.root,'logs');\nif (!fs.existsSync(dir)) fs.mkdirSync(dir);\n\nconst logger = new winston.Logger({\n  transports: [\n    new DailyRotateFile({\n      name: 'error-file',\n      datePattern: '.yyyy-MM-dd.log',\n      filename: `${config.root}/logs/error`,\n    }),\n  ],\n});\n\nif (['development', 'test'].includes(NODE_ENV)) logger.add(winston.transports.Console);\n\nexport default logger;\n"]}