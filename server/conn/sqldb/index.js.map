{"version":3,"sources":["conn/sqldb/index.js"],"names":["MYSQL_DB","MYSQL_USER","MYSQL_PASS","MYSQL_HOST","MYSQL_TZ","db","sequelize","host","dialect","timezone","seederStorage","supportBigNumbers","User","import","RefreshToken","AccessToken","App","AuthCode","Session","forEach","model","camelCase","modelName","associate","Sequelize"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEQA,Q,yBAAAA,Q;IAAUC,U,yBAAAA,U;IAAYC,U,yBAAAA,U;IAAYC,U,yBAAAA,U;IAAYC,Q,yBAAAA,Q;;;AAEtD,IAAMC,KAAK;AACTC,aAAW,wBACTN,QADS,EAETC,UAFS,EAGTC,UAHS,EAIT,EAAEK,MAAMJ,UAAR;AACEK,aAAS,OADX;AAEEC,cAAUL,QAFZ;AAGEM,mBAAe,WAHjB;AAIEC,uBAAmB;AAJrB,GAJS;AADF,CAAX;;AAcAN,GAAGO,IAAH,GAAUP,GAAGC,SAAH,CAAaO,MAAb,CAAoB,2BAApB,CAAV;AACAR,GAAGS,YAAH,GAAkBT,GAAGC,SAAH,CAAaO,MAAb,CAAoB,qDAApB,CAAlB;AACAR,GAAGU,WAAH,GAAiBV,GAAGC,SAAH,CAAaO,MAAb,CAAoB,oDAApB,CAAjB;AACAR,GAAGW,GAAH,GAASX,GAAGC,SAAH,CAAaO,MAAb,CAAoB,4CAApB,CAAT;AACAR,GAAGY,QAAH,GAAcZ,GAAGC,SAAH,CAAaO,MAAb,CAAoB,iDAApB,CAAd;AACAR,GAAGa,OAAH,GAAab,GAAGC,SAAH,CAAaO,MAAb,CAAoB,gDAApB,CAAb;;AAEA,CACE,MADF,EACU,UADV,EACsB,YADtB,EACoC,SADpC,EAEEM,OAFF,CAEU;AAAA,SACPd,GAAGe,KAAH,IAAYf,GAAGC,SAAH,CAAaO,MAAb,gBAAiC,iBAAEQ,SAAF,CAAYD,KAAZ,CAAjC,SAAuD,iBAAEC,SAAF,CAAYD,KAAZ,CAAvD,YADL;AAAA,CAFV;;AAKA,yBAAef,EAAf;;AAEA,oBAAYA,EAAZ,EAAgBc,OAAhB,CAAwB,UAACG,SAAD,EAAe;AACrC,MAAI,eAAejB,GAAGiB,SAAH,CAAnB,EAAkC;AAChCjB,OAAGiB,SAAH,EAAcC,SAAd,CAAwBlB,EAAxB;AACD;AACF,CAJD;;AAMAA,GAAGmB,SAAH;;kBAEenB,E","file":"index.js","sourcesContent":["import _ from 'lodash';\nimport Sequelize from 'sequelize';\nimport config from '../../config/environment';\nimport oauthComponent from '../../components/oauth/sequelize';\n\nconst { MYSQL_DB, MYSQL_USER, MYSQL_PASS, MYSQL_HOST, MYSQL_TZ } = config;\n\nconst db = {\n  sequelize: new Sequelize(\n    MYSQL_DB,\n    MYSQL_USER,\n    MYSQL_PASS,\n    { host: MYSQL_HOST,\n      dialect: 'mysql',\n      timezone: MYSQL_TZ,\n      seederStorage: 'sequelize',\n      supportBigNumbers: true,\n    }\n  ),\n};\n\ndb.User = db.sequelize.import('../../api/user/user.model');\ndb.RefreshToken = db.sequelize.import('../../components/oauth/sequelize/refreshToken.model');\ndb.AccessToken = db.sequelize.import('../../components/oauth/sequelize/accessToken.model');\ndb.App = db.sequelize.import('../../components/oauth/sequelize/app.model');\ndb.AuthCode = db.sequelize.import('../../components/oauth/sequelize/authCode.model');\ndb.Session = db.sequelize.import('../../components/oauth/sequelize/session.model');\n\n[\n  'Role', 'Shipment', 'InShipment', 'Address',\n].forEach(model =>\n  (db[model] = db.sequelize.import(`../../api/${_.camelCase(model)}/${_.camelCase(model)}.model`)));\n\noauthComponent(db);\n\nObject.keys(db).forEach((modelName) => {\n  if ('associate' in db[modelName]) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.Sequelize = Sequelize;\n\nexport default db;\n"]}