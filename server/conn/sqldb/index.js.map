{"version":3,"sources":["conn/sqldb/index.js"],"names":["MYSQL_DB","MYSQL_USER","MYSQL_PASS","MYSQL_HOST","MYSQL_TZ","db","sequelize","host","dialect","timezone","seederStorage","User","import","RefreshToken","AccessToken","App","AuthCode","Session","forEach","model","camelCase","modelName","associate","Sequelize"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEQA,Q,yBAAAA,Q;IAAUC,U,yBAAAA,U;IAAYC,U,yBAAAA,U;IAAYC,U,yBAAAA,U;IAAYC,Q,yBAAAA,Q;;;AAEtD,IAAMC,KAAK;AACTC,aAAW,wBACTN,QADS,EACCC,UADD,EACaC,UADb,EAET,EAAEK,MAAMJ,UAAR,EAAoBK,SAAS,OAA7B,EAAsCC,UAAUL,QAAhD,EAA0DM,eAAe,WAAzE,EAFS;AADF,CAAX;;AAOAL,GAAGM,IAAH,GAAUN,GAAGC,SAAH,CAAaM,MAAb,CAAoB,2BAApB,CAAV;AACAP,GAAGQ,YAAH,GAAkBR,GAAGC,SAAH,CAAaM,MAAb,CAAoB,qDAApB,CAAlB;AACAP,GAAGS,WAAH,GAAiBT,GAAGC,SAAH,CAAaM,MAAb,CAAoB,oDAApB,CAAjB;AACAP,GAAGU,GAAH,GAASV,GAAGC,SAAH,CAAaM,MAAb,CAAoB,4CAApB,CAAT;AACAP,GAAGW,QAAH,GAAcX,GAAGC,SAAH,CAAaM,MAAb,CAAoB,iDAApB,CAAd;AACAP,GAAGY,OAAH,GAAaZ,GAAGC,SAAH,CAAaM,MAAb,CAAoB,gDAApB,CAAb;;AAEA,CACE,OADF,EACW,gBADX,EAC6B,UAD7B,EACyC,OADzC,EACkD,UADlD,EAC8D,iBAD9D,EACiF,SADjF,EAEE,eAFF,EAEmB,SAFnB,EAE8B,aAF9B,EAE6C,aAF7C,EAE4D,aAF5D,EAE2E,gBAF3E,EAGE,OAHF,EAGW,cAHX,EAG2B,UAH3B,EAGuC,UAHvC,EAGmD,YAHnD,EAGiE,SAHjE,EAG4E,SAH5E,EAIE,mBAJF,EAIuB,cAJvB,EAKEM,OALF,CAKU;AAAA,SACPb,GAAGc,KAAH,IAAYd,GAAGC,SAAH,CAAaM,MAAb,gBAAiC,iBAAEQ,SAAF,CAAYD,KAAZ,CAAjC,SAAuD,iBAAEC,SAAF,CAAYD,KAAZ,CAAvD,YADL;AAAA,CALV;;AAQA,yBAAed,EAAf;;AAEA,oBAAYA,EAAZ,EAAgBa,OAAhB,CAAwB,qBAAa;AACnC,MAAI,eAAeb,GAAGgB,SAAH,CAAnB,EAAkC;AAChChB,OAAGgB,SAAH,EAAcC,SAAd,CAAwBjB,EAAxB;AACD;AACF,CAJD;;AAMAA,GAAGkB,SAAH;;kBAEelB,E","file":"index.js","sourcesContent":["import _ from 'lodash';\nimport Sequelize from 'sequelize';\nimport config from '../../config/environment';\nimport oauthComponent from '../../components/oauth/sequelize';\n\nconst { MYSQL_DB, MYSQL_USER, MYSQL_PASS, MYSQL_HOST, MYSQL_TZ } = config;\n\nconst db = {\n  sequelize: new Sequelize(\n    MYSQL_DB, MYSQL_USER, MYSQL_PASS,\n    { host: MYSQL_HOST, dialect: 'mysql', timezone: MYSQL_TZ, seederStorage: 'sequelize' }\n  ),\n};\n\ndb.User = db.sequelize.import('../../api/user/user.model');\ndb.RefreshToken = db.sequelize.import('../../components/oauth/sequelize/refreshToken.model');\ndb.AccessToken = db.sequelize.import('../../components/oauth/sequelize/accessToken.model');\ndb.App = db.sequelize.import('../../components/oauth/sequelize/app.model');\ndb.AuthCode = db.sequelize.import('../../components/oauth/sequelize/authCode.model');\ndb.Session = db.sequelize.import('../../components/oauth/sequelize/session.model');\n\n[\n  'Group', 'SenderIdStatus', 'SenderId', 'Route', 'Upstream', 'LoginIdentifier', 'Contact',\n  'MessageStatus', 'Message', 'PackageType', 'UserPackage', 'Transaction', 'PriorityNumber',\n  'Group', 'GroupContact', 'Campaign', 'Template', 'MessageFly', 'Selling', 'Sending',\n  'TransactionStatus', 'UpstreamPlan',\n].forEach(model =>\n  (db[model] = db.sequelize.import(`../../api/${_.camelCase(model)}/${_.camelCase(model)}.model`)));\n\noauthComponent(db);\n\nObject.keys(db).forEach(modelName => {\n  if ('associate' in db[modelName]) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.Sequelize = Sequelize;\n\nexport default db;\n"]}